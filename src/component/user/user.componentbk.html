  <div class="container">
    @if(users$){
    <ng-container *ngIf="type=='list'">
      <div id="list">
<header>
    <p> <a routerLink="../../../user/new/-1">Add User </a> </p> 
   </header>
 
   <div  class="table-responsive small section-body">
     <table class="table table-striped table-sm">
       <thead>
         <tr>
          <th scope="col"></th>
           <th scope="col">Email</th>
           <th scope="col">Name</th>
           <th scope="col">Role</th>
           <th scope="col">Edit</th>
           <th scope="col" >Delete</th>
         </tr>
       </thead>
       <tbody>
         <tr *ngFor="let u of users$">
           <td><input  type = "checkbox"></td>
           <td><a routerLink= "../../../user/detail/{{u.id}}" >{{u.email}} </a> </td>
           <td>{{u.firstName}} {{u.middleName}} {{u.lastName}}</td>
           <td>{{u.topRole}}</td>
           <td><a  routerLink="../../../user/edit/{{u.id}}" class=""><i class="bi bi-gear-wide-connected"></i>  Edit</a></td>
           <td><a  class="btn-danger" (click)="deleteUser(u.id)" style="cursor: pointer;"><i class="bi bi-x-circle-fill" style="color: #FF0000;" ></i>  Delete</a></td>
         </tr>
      
       </tbody>
     </table>
   </div>
      </div>
    </ng-container>
  }
@if(user){
<ng-container *ngIf="type=='detail'">
  <div>
<p>{{user.email}}</p>
  </div>
</ng-container>

<ng-container *ngIf="type=='new' || type=='edit'">
  <div>
<form [formGroup]="userForm" (ngSubmit)="saveUser()">

              <div class="mb-3 row">
                  <label for="email" class="col-sm-2 col-form-label">E-mail</label>
                  <div class="col-sm-10">
                    <input formControlName="email" class="form-control" id="email">
                        <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="alert alert-danger">
    <div *ngIf="email?.hasError('required')">
      Email is required.
    </div>
   
    <div *ngIf="email?.hasError('email')">
      please enter a valid email
    </div>
  </div>
                  </div>
                </div>
            

                <div class="mb-3 row">
                  <label for="firstName" class="col-sm-2 col-form-label">First Name</label>
                  <div class="col-sm-10">
                    <input formControlName="firstName" class="form-control" id="firstName">
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="middleName" class="col-sm-2 col-form-label">Middle Name</label>
                  <div class="col-sm-10">
                    <input formControlName="middleName" class="form-control" id="middleName">
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="lastName" class="col-sm-2 col-form-label">Last Name</label>
                  <div class="col-sm-10">
                    <input formControlName="lastName" class="form-control" id="lastName">
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="website" class="col-sm-2 col-form-label">Website</label>
                  <div class="col-sm-10">
                    <input formControlName="website" class="form-control" id="website">
                  </div>
                </div>

                @if(type=='new'){
<div class="mb-3 row">
                  <label for="password" class="col-sm-2 col-form-label">Password</label>
                  <div class="col-sm-10">
                    <input type="password" autocomplete="off" formControlName="password" class="form-control" id="password">
                  </div>
                </div>
                }
                @else {
                  <div class="mb-3 row">
                    <label for="password" class="col-sm-2 col-form-label"></label>
                  <div class="col-sm-6">
                    <button type="button" (click)="changePassword=true"  class="btn btn-primary">Change Password</button>
                  </div>
                </div>

                <div class="mb-3 row" *ngIf="changePassword">
                  <label for="password" class="col-sm-2 col-form-label">Password</label>
                  <div class="col-sm-6">
                    <input type="password" autocomplete="off" formControlName="password" class="form-control" id="password">
                  </div>
                  <div class="col-sm-4">
                    <button type="button" (click)="changePassword=false"  class="btn btn-danger">Cancel</button>
                  </div>
                </div>

                }

                
				
				<div class="mb-3 row">
                  <label for="topRole" class="col-sm-2 col-form-label">Role</label>
                  <div class="col-sm-10">
                      <select formControlName="topRole"     id="topRole"  class="form-select" aria-label="Role" >
                          <option *ngFor="let r of config.ROLES" [ngValue]="r">{{r}}</option>
                        </select>
                  </div>
                </div>
                <button [disabled]="!userForm.valid"  class="btn float-start">Submit</button>
				</form>
  </div>
</ng-container>

}




 </div>

 <!--promptmodal-->

 <!--#promptmodal-->



<!--Status message-->
<div  *ngIf="statusMessage">
      <app-error-message [(errorMessage)]="statusMessage" [(alertType)]="alertType"></app-error-message>
     </div>
     <!--Status message-->




